!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).HWAWebView={})}(this,(function(e){"use strict";const r={NOT_TOKEN_WEBVIEW:"Not hwatoken environment.",USER_CANCEL:"user_canceled"},t=e=>"string"==typeof e?e===r.USER_CANCEL:e.message===r.USER_CANCEL||1001===e.errorCode,n=()=>{if("undefined"==typeof window)return!1;const e=window;if(void 0===e.hwaToken)return!1;const r=e.hwaToken||{};return!r.isSimulated&&!!r.callAPI},i=()=>{if(!n())throw new Error(r.NOT_TOKEN_WEBVIEW);return window.hwaToken},o=(...e)=>i().callAPI(...e),a=()=>{if(!n())return"";const e=`${navigator.userAgent}`.match(/hwaToken\/(.*)/i);return!e||e.length<1?"":e[1]?`${e[1]}`.trim():""},s=(e="",r="")=>{const t=e.split("."),n=r.split(".");for(let e=0;e<3;e++){const r=Number(t[e]),i=Number(n[e]);if(r>i)return 1;if(i>r)return-1;if(!isNaN(r)&&isNaN(i))return 1;if(isNaN(r)&&!isNaN(i))return-1}return 0},u=e=>{const r=a();if(!r)return!1;const t=s(r,e);return!!(e&&t>=0)},g=e=>`${e}`.replace(/#/g,""),l={background:"hbg",foreground:"hfg",isTitleLeft:"title_left",titleSize:"title_size",isTransparent:"trans",transparentScrollY:"trans_y",loadingBackground:"lbg",loadingForeground:"lfg",bodyBackground:"bbg",bodyForeground:"bfg",statusBarStyle:"sfg"},c=["background","foreground","loadingForeground","loadingBackground","bodyBackground","bodyForeground"],d={navigator:{closeDapp:()=>{o("navigator.setTitle")},goBack:()=>{o("navigator.goBack")},toggleNavbar:()=>{o("navigator.toggleNavbar")},routeTo:({screen:e,props:r})=>{o("navigator.routeTo",{screen:e,passProps:r})},getOrientation:()=>new Promise(((e,r)=>{o("navigator.getOrientation",((t,n)=>{if(t)return r(t);e(n)}))})),setOrientation:e=>{o("navigator.setOrientation",`${e}`.toLowerCase())},setTitle:e=>{o("navigator.setTitle",e)}},native:{alert:e=>{o("native.alert",e)},confirm:e=>new Promise((r=>{o("native.confirm",e,(e=>{if(e)return r(!1);r(!0)}))})),setLoading:e=>{o(`native.${e?"showLoading":"hideLoading"}`)},share:e=>{const r=e.image?{title:e.title,url:e.image,type:"image/png"}:e;return new Promise(((e,t)=>{o("native.share",r,((r,n)=>{if(r)return t(r);e(n)}))}))},scanQRCode:()=>new Promise(((e,r)=>{o("native.scanQRCode",((t,n)=>{if(t)return r(t);e(n)}))})),setClipboard:e=>{o("native.setClipboard",e)}},user:{showAccountSwitch:(e=null)=>new Promise(((r,t)=>{o("user.showAccountSwitch",{chainType:e},((e,n)=>{if(e)return t(e);r(n)}))}))},device:{getCurrentLanguage:()=>new Promise(((e,r)=>{o("device.getCurrentLanguage",((t,n)=>{if(t)return r(t);e(n)}))})),getCurrentCurrency:()=>new Promise(((e,r)=>{o("device.getCurrentCurrency",((t,n)=>{if(t)return r(t);e(n)}))}))},internal:{getHeaders:()=>new Promise(((e,r)=>{o("private.getHeaders",((t,n)=>{if(t)return r(t);e(n)}))})),setLogo:e=>{o("private.setLogo",e)},log:(...e)=>{o("private.logo",e)},emitEvent:(e,r)=>new Promise(((t,n)=>{o("private.emitEvent",{eventName:e,params:r||{}},((e,r)=>{if(e)return n(e);t(r)}))})),dangerouslyAPI:(...e)=>o(...e),dangerouslyPromisifyAPI:(...e)=>((...e)=>i().callPromisifyAPI.bind(window.hwaToken)(...e))(...e)},layout:{setOptions:e=>{const r=Object.keys(e).reduce(((r,t)=>{const n=l[t],i=e[t],o=(s=t,c.includes(s)?(a=i,Array.isArray(a)?a.map(g):g(a)):i);var a,s;return n?Object.assign(Object.assign({},r),{[n]:o}):r}),{});o("layout.setOptions",r)}}},f=()=>n(),p={ERRORS:r,isHwaEnv:f,isCancelError:t,compareSemver:s,isGreaterThanOrEqualVersion:u,getVersion:a,apis:d};e.ERRORS=r,e.apis=d,e.compareSemver=s,e.default=p,e.getVersion=a,e.isCancelError=t,e.isGreaterThanOrEqualVersion=u,e.isHwaEnv=f,Object.defineProperty(e,"__esModule",{value:!0})}));
