!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).HWAWebView={})}(this,(function(e){"use strict";const r={NOT_TOKEN_WEBVIEW:"Not hwatoken environment.",USER_CANCEL:"user_canceled"},n=e=>"string"==typeof e?e===r.USER_CANCEL:e.message===r.USER_CANCEL||1001===e.errorCode,t=()=>{if("undefined"==typeof window)return!1;const e=window;if(void 0===e.hwaToken)return!1;const r=e.hwaToken||{};return!r.isSimulated&&!!r.callAPI},i=()=>{if(!t())throw new Error(r.NOT_TOKEN_WEBVIEW);return window.hwaToken},o=(...e)=>i().callAPI(...e),a=()=>{if(!t())return"";const e=`${navigator.userAgent}`.match(/hwaToken\/(.*)/i);return!e||e.length<1?"":e[1]?`${e[1]}`.trim():""},s=(e="",r="")=>{const n=e.split("."),t=r.split(".");for(let e=0;e<3;e++){const r=Number(n[e]),i=Number(t[e]);if(r>i)return 1;if(i>r)return-1;if(!isNaN(r)&&isNaN(i))return 1;if(isNaN(r)&&!isNaN(i))return-1}return 0},u=e=>{const r=a();if(!r)return!1;const n=s(r,e);return!!(e&&n>=0)},g=e=>`${e}`.replace(/#/g,""),c={background:"hbg",foreground:"hfg",isTitleLeft:"title_left",titleSize:"title_size",isTransparent:"trans",transparentScrollY:"trans_y",loadingBackground:"lbg",loadingForeground:"lfg",bodyBackground:"bbg",bodyForeground:"bfg",statusBarStyle:"sfg"},l=["background","foreground","loadingForeground","loadingBackground","bodyBackground","bodyForeground"],d={navigator:{closeDapp:()=>{o("navigator.setTitle")},goBack:()=>{o("navigator.goBack")},toggleNavbar:()=>{o("navigator.toggleNavbar")},routeTo:({screen:e,props:r})=>{o("navigator.routeTo",{screen:e,passProps:r})},getOrientation:()=>new Promise(((e,r)=>{o("navigator.getOrientation",((n,t)=>{if(n)return r(n);e(t)}))})),setOrientation:e=>{o("navigator.setOrientation",`${e}`.toLowerCase())},setTitle:e=>{o("navigator.setTitle",e)}},native:{alert:e=>{o("native.alert",e)},confirm:e=>new Promise((r=>{o("native.confirm",e,(e=>{if(e)return r(!1);r(!0)}))})),setLoading:e=>{o(`native.${e?"showLoading":"hideLoading"}`)},share:e=>{const r=e.image?{title:e.title,url:e.image,type:"image/png"}:e;return new Promise(((e,n)=>{o("native.share",r,((r,t)=>{if(r)return n(r);e(t)}))}))},scanQRCode:()=>new Promise(((e,r)=>{o("native.scanQRCode",((n,t)=>{if(n)return r(n);e(t)}))})),setClipboard:e=>{o("native.setClipboard",e)}},user:{showAccountSwitch:(e=null)=>new Promise(((r,n)=>{o("user.showAccountSwitch",{chainType:e},((e,t)=>{if(e)return n(e);r(t)}))}))},device:{getCurrentLanguage:()=>new Promise(((e,r)=>{o("device.getCurrentLanguage",((n,t)=>{if(n)return r(n);e(t)}))})),getCurrentCurrency:()=>new Promise(((e,r)=>{o("device.getCurrentCurrency",((n,t)=>{if(n)return r(n);e(t)}))}))},internal:{getHeaders:()=>new Promise(((e,r)=>{o("private.getHeaders",((n,t)=>{if(n)return r(n);e(t)}))})),setLogo:e=>{o("private.setLogo",e)},log:(...e)=>{o("private.logo",e)},emitEvent:(e,r)=>new Promise(((n,t)=>{o("private.emitEvent",{eventName:e,params:r||{}},((e,r)=>{if(e)return t(e);n(r)}))})),dangerouslyAPI:(...e)=>o(...e),dangerouslyPromisifyAPI:(...e)=>((...e)=>i().callPromisifyAPI.bind(window.hwaToken)(...e))(...e)},layout:{setOptions:e=>{const r=Object.keys(e).reduce(((r,n)=>{const t=c[n],i=e[n],o=(s=n,l.includes(s)?(a=i,Array.isArray(a)?a.map(g):g(a)):i);var a,s;return t?Object.assign(Object.assign({},r),{[t]:o}):r}),{});o("layout.setOptions",r)}},transaction:{sendSignTransaction:(e=null)=>new Promise(((r,n)=>{o("transaction.sendSignTransaction",Object.assign({},e),((e,t)=>{if(e)return n(e);r(t)}))})),signTransaction:(e=null)=>new Promise(((r,n)=>{o("transaction.signTransaction",Object.assign({},e),((e,t)=>{if(e)return n(e);r(t)}))}))}},f=()=>t(),p={ERRORS:r,isHwaEnv:f,isCancelError:n,compareSemver:s,isGreaterThanOrEqualVersion:u,getVersion:a,apis:d};e.ERRORS=r,e.apis=d,e.compareSemver=s,e.default=p,e.getVersion=a,e.isCancelError=n,e.isGreaterThanOrEqualVersion=u,e.isHwaEnv=f,Object.defineProperty(e,"__esModule",{value:!0})}));
